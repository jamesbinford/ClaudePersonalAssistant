services:
  mailpit:
    image: axllent/mailpit:latest
    container_name: mailpit
    restart: unless-stopped
    ports:
      - "1025:1025"   # SMTP server
      - "8025:8025"   # Web UI
    environment:
      # Relay settings - uncomment and configure to actually send emails
      - MP_SMTP_RELAY_HOST=${RELAY_HOST:-}
      - MP_SMTP_RELAY_PORT=${RELAY_PORT:-587}
      - MP_SMTP_RELAY_STARTTLS=true
      - MP_SMTP_RELAY_AUTH=login
      - MP_SMTP_RELAY_USERNAME=${RELAY_USER:-}
      - MP_SMTP_RELAY_PASSWORD=${RELAY_PASSWORD:-}
      # Only relay if relay host is configured, otherwise just catch
      - MP_SMTP_RELAY_ALL=${RELAY_ALL:-false}
    volumes:
      - mailpit-data:/data

volumes:
  mailpit-data:
